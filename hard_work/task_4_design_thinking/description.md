VoiceInteractionInboundEffects

Исходя из названия - это класс, где мы обрабатываем события и действия, возникающие при обработке входящих звонков (
интеракций).
Инициализируется при загрузке агентского интерфейса
На входе фильтруем все экшены по типу Звонка Calltype. Сюда попадут только Inbound.

При событии создания новой или обновления текущей интеракции берем текущее состояние интеракции и обновляем в ней
информацию о входящем звонке, если в соответствующих полях есть информация,
иначе оставляем текущие значения интеракции. Если какие-либо из полей обновились, отправляем событие об изменение
входящей интеракции.

При получении события загрузки информации о входящем звонке мы делаем апи-запрос на получение связанных с агентом
кампаний, далее для каждой из полученных кампаний ищем контакты, отправляем события о загрузке кампаний, о контактах, об
успешной загрузке информации о входящем звонке.

При получении события врапапа мы берем интеракцию и словарь с контактами, достаем контакт по id из информации о входящем
звонке в интеракции. Если контакт есть, делаем апи-запрос на эндпоинт outbound-contact-on-inbound-call с информацией для
врапапа, если нет - /voice/wrapup/inbound (значит это входящий звонок, контакт которого мы не нашли ни в одной из
кампаний агента). Если врапап завершился успешно, отправляем событие успешного завершения врапапа.

При получении события нового входящего контакта, мы берем интеракцию, отправляем апи-запрос на получение контакта для
входящей интеракции (отсюда нам нужны переменные контакта), в случае успеха отправляем событие загрузки коллскрипта.

При получении события о том, что нужно сохранить входящий врапап как врапап для кампании, мы берем драфт врапапа, и
отправляем события загрузки контакта для врапапа входящего в кампании, сохранения черновика врапапа.

При получении события загрузки контакта для врапапа входящего в кампании, мы берем словари кампаний и контактов, достаем
кампанию по контакту, и отправляем события загрузки нужных врапапов для этой кампании.

При получении события загрузки контакта для врапапа входящего в кампании, мы берем интеракцию, словари кампаний и
контактов, проверяем есть ли в интеракции информация о входящем коллскрипте, если да, то отправляем событие врапапа как
инбаунд, далее достаем кампанию по контакту из словарей и отправляем событие загрузки коллскрипта с контактом из
кампании.